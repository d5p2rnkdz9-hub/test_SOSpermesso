---
phase: 01-i18n-foundation-design-system
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - tailwind.config.ts
  - components.json
  - src/components/ui/button.tsx
  - src/components/ui/card.tsx
  - src/components/ui/checkbox.tsx
  - src/components/ui/label.tsx
  - src/components/ui/progress.tsx
  - src/components/ui/radio-group.tsx
  - src/components/ui/textarea.tsx
  - src/components/quiz/ProgressBar.tsx
  - src/components/quiz/FeedbackDisplay.tsx
  - src/components/quiz/StartScreen.tsx
  - src/components/quiz/TextInput.tsx
  - src/components/quiz/ProfileSelect.tsx
  - src/app/quiz/results/page.tsx
autonomous: true

must_haves:
  truths:
    - "The application displays yellow (#FFC629) as the dominant background color, not the Corso AI blue/green"
    - "No shadow CSS classes remain on any shadcn/ui component"
    - "No dark mode CSS variables exist in globals.css"
    - "Zero physical direction CSS properties (ml-, mr-, pl-, pr-, text-left, text-right, left-, right-, border-l-, border-r-, rounded-l-, rounded-r-, float-left, float-right) remain in the codebase"
    - "Border radius is 12px (0.75rem) on cards and interactive elements"
  artifacts:
    - path: "src/app/globals.css"
      provides: "SOSpermesso yellow/black/white design tokens"
      contains: "--background: 45 100%"
    - path: "tailwind.config.ts"
      provides: "Updated Tailwind config without Corso AI brand colors, with font-arabic"
    - path: "components.json"
      provides: "shadcn config with rtl: true"
      contains: "\"rtl\": true"
    - path: "src/components/ui/button.tsx"
      provides: "RTL-safe button with no shadows"
    - path: "src/components/ui/card.tsx"
      provides: "RTL-safe card with no shadows"
  key_links:
    - from: "src/app/globals.css"
      to: "tailwind.config.ts"
      via: "CSS variables consumed by Tailwind color config"
      pattern: "hsl\\(var\\(--"
    - from: "tailwind.config.ts"
      to: "src/app/[locale]/layout.tsx"
      via: "font-arabic utility class maps to --font-arabic CSS variable"
      pattern: "font-arabic"
---

<objective>
Replace the Corso AI visual identity with SOSpermesso's yellow/black/white design system and migrate all components to use CSS logical properties for RTL support. This covers two tightly coupled concerns: (1) design tokens/palette replacement in globals.css and tailwind.config.ts, and (2) RTL-safe CSS migration across all shadcn/ui and custom components.

Purpose: The visual identity must change from Corso AI blue/green to SOSpermesso yellow/black/white, and all CSS must use logical properties so components render correctly in both LTR and RTL modes. These two changes affect the same component files (shadow removal + physical CSS replacement happen in the same pass).
Output: Updated globals.css with yellow/black/white tokens, shadow-free and RTL-safe shadcn/ui components, zero physical direction CSS properties in the codebase.
</objective>

<execution_context>
@/Users/albertopasquero/.claude/get-shit-done/workflows/execute-plan.md
@/Users/albertopasquero/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-i18n-foundation-design-system/01-RESEARCH.md
@.planning/phases/01-i18n-foundation-design-system/01-CONTEXT.md

Key existing files to reference:
@src/app/globals.css (current Corso AI CSS variables -- will be replaced)
@tailwind.config.ts (current config with brand-blue/green)
@components.json (shadcn config -- rtl: false, new-york style)
@src/components/ui/button.tsx (has shadow classes)
@src/components/ui/card.tsx (has shadow class)
@src/components/ui/checkbox.tsx (has shadow class)
@src/components/ui/radio-group.tsx (has shadow class)
@src/components/ui/textarea.tsx (has shadow-sm class)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace design tokens with SOSpermesso yellow/black/white palette</name>
  <files>
    src/app/globals.css
    tailwind.config.ts
    components.json
  </files>
  <action>
    1. Rewrite `src/app/globals.css` with the SOSpermesso palette. Replace the ENTIRE file content:

       - Remove the old `:root` block with `--foreground-rgb`, `--background-start-rgb`, `--background-end-rgb`
       - Remove the `@media (prefers-color-scheme: dark)` block entirely
       - Remove the `.dark` class block entirely -- this is a single-mode design
       - Keep the `@tailwind` directives, body font-family, focus-visible styles, and smooth scrolling
       - Replace all `@layer base :root` CSS variable values with the SOSpermesso palette:

       ```
       --background: 45 100% 56%          /* #FFC629 -- Yellow dominant background */
       --foreground: 0 0% 0%              /* Black text on yellow */
       --card: 0 0% 100%                  /* White cards */
       --card-foreground: 0 0% 0%         /* Black text on white cards */
       --popover: 0 0% 100%              /* White popovers */
       --popover-foreground: 0 0% 0%     /* Black text */
       --primary: 0 0% 0%                /* Black -- buttons, interactive */
       --primary-foreground: 45 100% 56% /* Yellow text on black */
       --secondary: 0 0% 100%           /* White */
       --secondary-foreground: 0 0% 0%  /* Black on white */
       --muted: 45 40% 90%              /* Light yellow tint */
       --muted-foreground: 0 0% 30%     /* Dark gray for muted text */
       --accent: 45 100% 48%            /* Darker yellow for hover */
       --accent-foreground: 0 0% 0%     /* Black */
       --destructive: 0 84% 60%         /* Red for errors */
       --destructive-foreground: 0 0% 100% /* White on red */
       --border: 0 0% 0%                /* Black borders (flat design) */
       --input: 0 0% 80%                /* Gray input borders */
       --ring: 0 0% 0%                  /* Black focus ring */
       --radius: 0.75rem                /* 12px rounded corners */
       ```

       - Remove all chart variables (--chart-1 through --chart-5) -- not needed for Phase 1
       - Update the focus-visible outline color from `#4ade80` (green) to `hsl(0 0% 0%)` (black) to match the new palette
       - Keep the `@layer base { * { @apply border-border; } body { @apply bg-background text-foreground; } }` block
       - Keep the body font-family, smooth scrolling, and Italian typography sections
       - Add slide transition CSS classes for Phase 2 readiness (from RESEARCH.md Pattern 6):
         ```css
         .slide-enter { opacity: 0; transform: translateX(30px); }
         [dir="rtl"] .slide-enter { transform: translateX(-30px); }
         .slide-enter-active { opacity: 1; transform: translateX(0); transition: opacity 300ms ease-out, transform 300ms ease-out; }
         .slide-exit { opacity: 1; transform: translateX(0); }
         .slide-exit-active { opacity: 0; transform: translateX(-30px); transition: opacity 200ms ease-in, transform 200ms ease-in; }
         [dir="rtl"] .slide-exit-active { transform: translateX(30px); }
         ```

    2. Update `tailwind.config.ts`:
       - Remove `brand: { blue: '#1e3a5f', green: '#4ade80' }` from colors (Corso AI branding)
       - Add `fontFamily.arabic` pointing to the CSS variable: `arabic: ['var(--font-arabic)', 'system-ui', 'sans-serif']`
       - Update `fontFamily.sans` to use CSS variable: `sans: ['var(--font-sans)', 'system-ui', 'sans-serif']`
       - Keep all shadcn/ui color references (they use CSS variables, which now resolve to yellow/black/white)
       - Remove chart colors from the extend block
       - Ensure `darkMode: ["class"]` is removed or kept but harmless (no .dark class exists in CSS anymore)

    3. Update `components.json`: Set `"rtl": true`. This tells the shadcn CLI to generate RTL-safe components going forward.

    AVOID: Do NOT change the `hsl(var(--...))` pattern in tailwind.config.ts. The shadcn/ui components already reference these. Only the CSS variable VALUES change, not the system.
  </action>
  <verify>
    1. `grep -c "dark" src/app/globals.css` returns 0 (no dark mode references)
    2. `grep -c "brand-blue\|brand-green\|#1e3a5f\|#4ade80" tailwind.config.ts` returns 0
    3. `grep "45 100% 56%" src/app/globals.css` shows the yellow background variable
    4. `grep '"rtl": true' components.json` confirms RTL flag
    5. `grep "font-arabic\|--font-arabic" tailwind.config.ts` shows Arabic font config
    6. `grep "chart" src/app/globals.css` returns 0 (chart variables removed)
    7. `npm run build` succeeds (Tailwind resolves all variables correctly)
  </verify>
  <done>
    globals.css contains SOSpermesso yellow/black/white design tokens with no dark mode. tailwind.config.ts has Corso AI brand colors removed and font-arabic added. components.json has rtl: true. Slide transition CSS classes added to globals.css.
  </done>
</task>

<task type="auto">
  <name>Task 2: RTL-migrate all components and remove shadows</name>
  <files>
    src/components/ui/button.tsx
    src/components/ui/card.tsx
    src/components/ui/checkbox.tsx
    src/components/ui/label.tsx
    src/components/ui/progress.tsx
    src/components/ui/radio-group.tsx
    src/components/ui/textarea.tsx
    src/components/quiz/ProgressBar.tsx
    src/components/quiz/FeedbackDisplay.tsx
    src/components/quiz/StartScreen.tsx
    src/components/quiz/TextInput.tsx
    src/components/quiz/ProfileSelect.tsx
    src/app/quiz/results/page.tsx
  </files>
  <action>
    First, try running `pnpm dlx shadcn@latest migrate rtl` to see if it handles the new-york style components. If the command errors or doesn't transform the files, proceed with manual migration below. The research notes this may not work on new-york style -- be prepared for manual work.

    **For ALL shadcn/ui component files (src/components/ui/*.tsx), do TWO things:**

    A. **Remove all shadow classes:**
       - `shadow` -> remove entirely
       - `shadow-sm` -> remove entirely
       - `shadow-lg` -> remove entirely
       - `shadow-md` -> remove entirely

       Specific files with shadows to remove:
       - `button.tsx`: Remove `shadow` from default variant, `shadow-sm` from destructive/outline/secondary variants
       - `card.tsx`: Remove `shadow` from Card component
       - `checkbox.tsx`: Remove `shadow` from root class
       - `radio-group.tsx`: Remove `shadow` from RadioGroupItem class
       - `textarea.tsx`: Remove `shadow-sm` from textarea class

    B. **Replace physical CSS properties with logical equivalents (if any exist in ui/ files):**
       Review each file. The current ui/ components appear to mostly use direction-neutral properties (p-6, px-4, py-2, etc.), but verify and fix any `ml-`, `mr-`, `pl-`, `pr-`, `text-left`, `text-right`, `left-`, `right-`, `border-l-`, `border-r-`, `rounded-l-`, `rounded-r-`, `float-left`, `float-right`.

    **Additionally, update button.tsx variants for SOSpermesso design:**
       - Remove `brand` and `brandOutline` variants (Corso AI branding)
       - Update the `default` variant: remove shadow, keep `bg-primary text-primary-foreground hover:bg-primary/90` (now resolves to black button with yellow text)
       - Ensure all interactive sizes have 48px+ minimum height for touch targets:
         - `default`: change from `h-9` to `h-12` (48px)
         - `sm`: change from `h-8` to `h-10` (40px) -- smaller but still usable
         - `lg`: change from `h-10` to `h-14` (56px) -- large touch target
         - `icon`: change from `h-9 w-9` to `h-12 w-12` (48px touch target)

    **For ALL custom quiz component files, fix the specific physical CSS properties identified in the research audit:**

    1. `src/components/quiz/ProgressBar.tsx:34`: `text-right` -> `text-end`
    2. `src/components/quiz/FeedbackDisplay.tsx:58`: `ml-2` -> `ms-2`
    3. `src/components/quiz/StartScreen.tsx:62`: `mr-2` -> `me-2`
    4. `src/components/quiz/TextInput.tsx:54`: `text-right` -> `text-end`
    5. `src/components/quiz/ProfileSelect.tsx:53`: `right-4` -> `end-4`
    6. `src/components/quiz/ProfileSelect.tsx:58`: `pr-8` -> `pe-8`
    7. `src/app/quiz/results/page.tsx:158`: `mr-2` -> `me-2`, and add `rtl:rotate-180` to the ArrowLeft icon
    8. `src/app/quiz/results/page.tsx:220`: `mr-2` -> `me-2`

    **After all changes, run the FULL audit grep to confirm zero physical properties remain:**
    ```bash
    grep -rn 'ml-\|mr-\|pl-\|pr-\| left-\| right-\|text-left\|text-right\|border-l-\|border-r-\|rounded-l-\|rounded-r-\|float-left\|float-right' src/ --include="*.tsx" --include="*.ts"
    ```
    Note: `px-`, `py-`, `p-`, `m-` (without l/r suffix) are direction-neutral and should NOT be changed.
    Note: Be careful with grep patterns -- `ml-` should not match `xml-` or similar. Use word boundaries or review matches manually.
    Note: Tailwind classes like `place-content-center` contain `l-` but are NOT physical direction properties. Review grep output carefully.

    IMPORTANT: Do NOT change `left-0`/`right-0` in context of `absolute` positioning for overlay elements like Progress indicator -- these are visual, not logical. However, for the Progress component's `translateX`, consider adding RTL-aware transform: the indicator slides from left in LTR, from right in RTL. Add a comment noting this needs RTL handling when the Progress component is used in the tree (Phase 2).
  </action>
  <verify>
    1. Run audit grep:
       ```bash
       grep -rn '\bml-\|\bmr-\|\bpl-\|\bpr-\|\bleft-\|\bright-\|\btext-left\|\btext-right\|\bborder-l-\|\bborder-r-\|\brounded-l-\|\brounded-r-\|\bfloat-left\|\bfloat-right' src/ --include="*.tsx" --include="*.ts"
       ```
       Should return ZERO results (or only false positives like `place-content-center`).

    2. Run shadow audit:
       ```bash
       grep -rn '\bshadow\b\|shadow-sm\|shadow-lg\|shadow-md' src/components/ui/ --include="*.tsx"
       ```
       Should return ZERO results.

    3. `grep "brand" src/components/ui/button.tsx` returns 0 (Corso AI brand variants removed)

    4. `npm run build` succeeds

    5. Verify button heights: `grep "h-12\|h-10\|h-14" src/components/ui/button.tsx` shows updated sizes
  </verify>
  <done>
    All shadcn/ui components have shadows removed and use logical CSS properties. All custom quiz components have physical CSS replaced with logical equivalents. Button variants updated for SOSpermesso (brand variants removed, touch-target sizes). Zero physical direction CSS properties in the codebase. components.json rtl flag set to true. Build succeeds.
  </done>
</task>

</tasks>

<verification>
Run these checks to confirm the plan is complete:

1. **No shadows:** `grep -rn 'shadow' src/components/ui/ --include="*.tsx"` returns 0 results
2. **No physical CSS:** `grep -rn '\bml-\|\bmr-\|\btext-left\|\btext-right' src/ --include="*.tsx"` returns 0 results (excluding false positives)
3. **No dark mode:** `grep -c 'dark' src/app/globals.css` returns 0
4. **No Corso AI branding:** `grep -c 'brand-blue\|brand-green\|#1e3a5f\|#4ade80' tailwind.config.ts src/app/globals.css` returns 0
5. **Yellow background:** `grep '45 100% 56%' src/app/globals.css` shows the primary yellow
6. **RTL flag:** `grep '"rtl": true' components.json` confirms
7. **Build succeeds:** `npm run build` exits 0
</verification>

<success_criteria>
- globals.css contains yellow/black/white palette with no dark mode
- All shadcn/ui components are shadow-free
- All components use logical CSS properties (zero physical direction properties)
- Tailwind config has font-arabic, no Corso AI brand colors
- Button sizes meet 48px+ touch target requirement
- components.json has rtl: true
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/01-i18n-foundation-design-system/01-02-SUMMARY.md`
</output>
